(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6178:function(e,t,s){Promise.resolve().then(s.bind(s,2104))},2104:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(8758),l=s.n(r),n=s(2265),i=s(9376),o=s(3145),c=s(7648),d=s(1201);let u=[{imgURL:"/assets/icons/sidebar/home-icon.svg",route:"/",label:"Home"},{imgURL:"/assets/icons/sidebar/smart-meter-icon.svg",route:"/house/my-smart-meter",label:"My Smart Meter"},{imgURL:"/assets/icons/sidebar/billing-icon.svg",route:"/house/billing",label:"Billing"}];var f=s(2381),x=e=>{let{user:t,type:s="desktop"}=e,r=(0,i.useRouter)(),l=async()=>{await fetch("/api/users/logout-account")&&r.push("/sign-in")};return(0,a.jsx)("footer",{className:"flex cursor-pointer items-center justify-between gap-2 py-6",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mobile"===s?"flex size-10 items-center justify-center rounded-full bg-gray-200":"flex size-10 items-center justify-center rounded-full bg-gray-200 max-xl:hidden",children:(0,a.jsx)(o.default,{src:"/assets/images/avatar-icon.svg",className:"rounded-full",width:100,height:100,alt:"user avatar",objectFit:"cover"})}),(0,a.jsxs)("div",{className:"mobile"===s?"flex flex-1 flex-col justify-center":"flex flex-1 flex-col justify-center max-xl:hidden",children:[(0,a.jsx)("h1",{className:"text-[14px] truncate text-gray-700 font-semibold",children:null==t?void 0:t.first_name}),(0,a.jsx)("p",{className:"text-[14px] truncate font-normal text-gray-600",children:null==t?void 0:t.email})]}),(0,a.jsx)("div",{className:"relative size-5 max-xl:w-full max-xl:flex max-xl:justify-center max-xl:items-center",onClick:l,children:(0,a.jsx)(o.default,{src:"/assets/icons/footer/logout.svg",fill:!0,alt:"logout icon"})})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(f.z,{type:"button",className:"bg-primary",onClick:()=>r.push("/sign-in"),children:"Add Account"})})})},m=e=>{let{user:t}=e,s=(0,i.usePathname)();return(0,a.jsxs)("section",{className:"sticky left-0 top-0 flex w-fit flex-col justify-between border-r border-gray-200 bg-white pt-8  text-white max-md:hidden sm:p-4 xl:p-6 2xl:w-[355px] rounded-[3.25rem] m-4 shadow-lg",children:[(0,a.jsxs)("nav",{className:"flex flex-col gap-4",children:[(0,a.jsxs)(c.default,{href:"/",className:"mb-12 cursor-pointer flex items-center gap-2",children:[(0,a.jsx)(o.default,{src:"/assets/icons/logo/energy-bloom-icon.png",width:120,height:120,alt:"Energy Bloom logo"}),(0,a.jsx)("h1",{className:"2xl:text-[26px] font-ibm-plex-serif text-[26px] font-bold text-black-1 max-xl:hidden",children:"Energy Bloom"})]}),u.map(e=>{let t=s===e.route||s.startsWith("".concat(e.route,"/"));return(0,a.jsxs)(c.default,{href:e.route,className:(0,d.cn)(" flex gap-3 items-center py-1 md:p-3 2xl:p-4 rounded-lg justify-center xl:justify-start",{"bg-primary":t}),children:[(0,a.jsx)("div",{className:"relative size-6",children:(0,a.jsx)(o.default,{src:e.imgURL,alt:e.label,fill:!0,className:(0,d.cn)({"text-black-1":t})})}),(0,a.jsx)("p",{className:(0,d.cn)("text-[16px] font-semibold text-black-1 max-xl:hidden",{"!text-gray-500":!t}),children:e.label})]},e.label)})]}),(0,a.jsx)(x,{user:t,type:"desktop"})]})};s(2778);var h=e=>{let{children:t}=e,[s,r]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),f=(0,i.useRouter)();return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:3002/api/users/logged-in-user");if(!e.ok)throw Error("Failed to fetch user");let t=await e.json();if(r(t),t){let e=await fetch("/api/devices/get?user_id=".concat(t.id));if(!e.ok)throw Error("Failed to fetch devices");await e.json()}else f.push("/sign-in")}catch(e){e instanceof Error?u(e.message):u("An unexpected error occurred"),f.push("/sign-in")}finally{c(!1)}})()},[f]),o)?(0,a.jsx)("p",{children:"Loading..."}):d?(0,a.jsx)("p",{className:"text-red-500",children:d}):(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{className:"".concat(l().className),children:(0,a.jsxs)("main",{className:"flex h-screen w-full bg-secondary",children:[(0,a.jsx)(m,{user:s}),t]})})})}},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(7437),r=s(2265),l=s(5293),n=s(7712),i=s(1201);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:s})),ref:t,...d})});c.displayName="Button"},1201:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(1994),r=s(3335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},2778:function(){},8758:function(e){e.exports={style:{fontFamily:"'__Inter_36bd41', '__Inter_Fallback_36bd41'",fontStyle:"normal"},className:"__className_36bd41"}}},function(e){e.O(0,[461,107,878,137,55,971,117,744],function(){return e(e.s=6178)}),_N_E=e.O()}]);