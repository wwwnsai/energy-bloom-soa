(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{2568:function(e,t,r){Promise.resolve().then(r.bind(r,1158))},1158:function(e,t,r){"use strict";r.d(t,{default:function(){return F}});var s=r(7437),a=r(3145),l=r(7648),n=r(2265),o=r(3590),i=r(9501),d=r(8811),c=r(9376),m=r(1229);let f=e=>m.z.object({first_name:"sign-in"===e?m.z.string().optional():m.z.string().min(3),last_name:"sign-in"===e?m.z.string().optional():m.z.string().min(3),address1:"sign-in"===e?m.z.string().optional():m.z.string().max(50),city:"sign-in"===e?m.z.string().optional():m.z.string().max(50),postal_code:"sign-in"===e?m.z.string().optional():m.z.string().min(3).max(6),date_of_birth:"sign-in"===e?m.z.string().optional():m.z.string().min(3),email:m.z.string().email(),password:m.z.string().min(8)});var x=r(5293),u=r(1201),g=r(1107);let p=(0,r(7712).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),h=n.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.f,{ref:t,className:(0,u.cn)(p(),r),...a})});h.displayName=g.f.displayName;let b=i.RV,y=n.createContext({}),j=e=>{let{...t}=e;return(0,s.jsx)(y.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},v=()=>{let e=n.useContext(y),t=n.useContext(N),{getFieldState:r,formState:s}=(0,i.Gc)(),a=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...a}},N=n.createContext({});n.forwardRef((e,t)=>{let{className:r,...a}=e,l=n.useId();return(0,s.jsx)(N.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:t,className:(0,u.cn)("space-y-2",r),...a})})}).displayName="FormItem";let w=n.forwardRef((e,t)=>{let{className:r,...a}=e,{error:l,formItemId:n}=v();return(0,s.jsx)(h,{ref:t,className:(0,u.cn)(l&&"text-destructive",r),htmlFor:n,...a})});w.displayName="FormLabel";let k=n.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:l,formDescriptionId:n,formMessageId:o}=v();return(0,s.jsx)(x.g7,{ref:t,id:l,"aria-describedby":a?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!a,...r})});k.displayName="FormControl",n.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:l}=v();return(0,s.jsx)("p",{ref:t,id:l,className:(0,u.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let _=n.forwardRef((e,t)=>{let{className:r,children:a,...l}=e,{error:n,formMessageId:o}=v(),i=n?String(null==n?void 0:n.message):a;return i?(0,s.jsx)("p",{ref:t,id:o,className:(0,u.cn)("text-sm font-medium text-destructive",r),...l,children:i}):null});_.displayName="FormMessage";var S=r(2381);let z=n.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});z.displayName="Input",f("sign-up");var E=e=>{let{control:t,name:r,label:a,placeholder:l}=e;return(0,s.jsx)(j,{control:t,name:r,render:e=>{let{field:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,s.jsx)(w,{className:"text-[14px] w-full max-w-[280px] font-medium text-gray-700",children:a}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[(0,s.jsx)(k,{children:(0,s.jsx)(z,{placeholder:l,className:"text-[16px] placeholder:text-[16px] rounded-lg border border-gray-300 text-gray-900 placeholder:text-gray-500",type:"password"===r?"password":"text",...t})}),(0,s.jsx)(_,{className:"text-[12px] text-red-500 mt-2"})]})]})}})},F=e=>{let{type:t}=e,r=(0,c.useRouter)(),[m,x]=(0,n.useState)(null),[u,g]=(0,n.useState)(!1),p=f(t),h=(0,i.cI)({resolver:(0,o.F)(p),defaultValues:{email:"",password:""}}),y=async e=>{g(!0);try{if("sign-up"===t){console.log("SIGNING UP USER: ",e);let t={first_name:e.first_name,last_name:e.last_name,address1:e.address1,city:e.city,postal_code:e.postal_code,date_of_birth:e.date_of_birth,email:e.email,password:e.password},s=await fetch("http://localhost:3002/api/users/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();if(!s.ok)throw Error(a.error||"Sign-up failed");x(a),r.push("/")}if("sign-in"===t){console.log("SIGNING IN USER: ",e);let t={email:e.email,password:e.password},s=await fetch("http://localhost:3002/api/users/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log("RESPONSE: ",s);let a=await s.json();if(!s.ok)throw Error(a.error||"Sign-in failed");x(a),s&&r.push("/")}}catch(e){console.log(e)}finally{g(!1)}};return(0,s.jsxs)("section",{className:"flex min-h-screen w-full flex-col justify-center gap-5 py-10 sm:px-32 md:gap-8 bg-white",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-5 md:gap-8",children:[(0,s.jsxs)(l.default,{href:"/",className:"cursor-pointer flex items-center gap-1",children:[(0,s.jsx)(a.default,{src:"/assets/icons/logo/energy-bloom-icon.png",width:90,height:90,alt:"Energy Bloom logo"}),(0,s.jsx)("h1",{className:"text-[26px] font-bold text-black-1",children:"Energy Bloom"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-1 md:gap-3",children:(0,s.jsxs)("h1",{className:"text-[24px] lg:text-[36px] font-semibold text-gray-900",children:[m?"Link Account":"sign-in"===t?"Sign In":"Sign Up",(0,s.jsx)("p",{className:"text-[16px] font-normal text-gray-600",children:m?"Link your account to get started":"Please enter your details"})]})})]}),m?(0,s.jsx)("div",{className:"flex flex-col gap-4"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{...h,children:(0,s.jsxs)("form",{onSubmit:h.handleSubmit(y),className:"space-y-8",children:["sign-up"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(E,{control:h.control,name:"first_name",label:"First Name",placeholder:"Enter your first name"}),(0,s.jsx)(E,{control:h.control,name:"last_name",label:"Last Name",placeholder:"Enter your last name"})]}),(0,s.jsx)(E,{control:h.control,name:"address1",label:"Address",placeholder:"Enter your specific address"}),(0,s.jsx)(E,{control:h.control,name:"city",label:"City",placeholder:"Enter your city"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(E,{control:h.control,name:"postal_code",label:"Postal Code",placeholder:"Example: 11101"}),(0,s.jsx)(E,{control:h.control,name:"date_of_birth",label:"Date of Birth",placeholder:"YYYY-MM-DD"})]})]}),(0,s.jsx)(E,{control:h.control,name:"email",label:"Email",placeholder:"Enter your email"}),(0,s.jsx)(E,{control:h.control,name:"password",label:"Password",placeholder:"Enter your password"}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:(0,s.jsx)(S.z,{type:"submit",disabled:u,className:"text-[16px] rounded-lg border border-primary bg-primary font-semibold text-white shadow-form",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{size:20,className:"animate-spin"})," \xa0 Loading..."]}):"sign-in"===t?"Sign In":"Sign Up"})})]})}),(0,s.jsxs)("footer",{className:"flex justify-center gap-1",children:[(0,s.jsx)("p",{className:"text-[14px] font-normal text-gray-600",children:"sign-in"===t?"Don't have an account?":"Already have an account?"}),(0,s.jsx)(l.default,{href:"sign-in"===t?"/sign-up":"/sign-in",className:"form-link",children:"sign-in"===t?"Sign up":"Sign in"})]})]})]})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(7437),a=r(2265),l=r(5293),n=r(7712),o=r(1201);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,...c}=e,m=d?l.g7:"button";return(0,s.jsx)(m,{className:(0,o.cn)(i({variant:a,size:n,className:r})),ref:t,...c})});d.displayName="Button"},1201:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var s=r(1994),a=r(3335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}}}]);