(()=>{var e={};e.id=667,e.ids=[667],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1197:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(6151),s(910),s(996);var r=s(170),a=s(5002),l=s(3876),n=s.n(l),i=s(6299),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["(root)",{children:["house",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6151)),"/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/app/(root)/house/billing/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,910)),"/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/app/(root)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/app/(root)/house/billing/page.tsx"],x="/(root)/house/billing/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(root)/house/billing/page",pathname:"/house/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2010:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3642,23)),Promise.resolve().then(s.t.bind(s,7586,23)),Promise.resolve().then(s.t.bind(s,7838,23)),Promise.resolve().then(s.t.bind(s,8057,23)),Promise.resolve().then(s.t.bind(s,7741,23)),Promise.resolve().then(s.t.bind(s,3118,23))},2512:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,5889,23)),Promise.resolve().then(s.bind(s,6796))},1470:(e,t,s)=>{Promise.resolve().then(s.bind(s,3705))},3705:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(7247),a=s(404),l=s.n(a),n=s(8964),i=s(4178),o=s(4597),c=s(9906),d=s(7524);let x=[{imgURL:"/assets/icons/sidebar/home-icon.svg",route:"/",label:"Home"},{imgURL:"/assets/icons/sidebar/smart-meter-icon.svg",route:"/house/my-smart-meter",label:"My Smart Meter"},{imgURL:"/assets/icons/sidebar/billing-icon.svg",route:"/house/billing",label:"Billing"}];var u=s(8852);let m=({user:e,type:t="desktop"})=>{let s=(0,i.useRouter)(),a=async()=>{await fetch("/api/users/logout-account")&&s.push("/sign-in")};return r.jsx("footer",{className:"flex cursor-pointer items-center justify-between gap-2 py-6",children:e?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"mobile"===t?"flex size-10 items-center justify-center rounded-full bg-gray-200":"flex size-10 items-center justify-center rounded-full bg-gray-200 max-xl:hidden",children:r.jsx(o.default,{src:"/assets/images/avatar-icon.svg",className:"rounded-full",width:100,height:100,alt:"user avatar",objectFit:"cover"})}),(0,r.jsxs)("div",{className:"mobile"===t?"flex flex-1 flex-col justify-center":"flex flex-1 flex-col justify-center max-xl:hidden",children:[r.jsx("h1",{className:"text-[14px] truncate text-gray-700 font-semibold",children:e?.first_name}),r.jsx("p",{className:"text-[14px] truncate font-normal text-gray-600",children:e?.email})]}),r.jsx("div",{className:"relative size-5 max-xl:w-full max-xl:flex max-xl:justify-center max-xl:items-center",onClick:a,children:r.jsx(o.default,{src:"/assets/icons/footer/logout.svg",fill:!0,alt:"logout icon"})})]}):r.jsx(r.Fragment,{children:r.jsx(u.z,{type:"button",className:"bg-primary",onClick:()=>s.push("/sign-in"),children:"Add Account"})})})},g=({user:e})=>{let t=(0,i.usePathname)();return(0,r.jsxs)("section",{className:"sticky left-0 top-0 flex w-fit flex-col justify-between border-r border-gray-200 bg-white pt-8  text-white max-md:hidden sm:p-4 xl:p-6 2xl:w-[355px] rounded-[3.25rem] m-4 shadow-lg",children:[(0,r.jsxs)("nav",{className:"flex flex-col gap-4",children:[(0,r.jsxs)(c.default,{href:"/",className:"mb-12 cursor-pointer flex items-center gap-2",children:[r.jsx(o.default,{src:"/assets/icons/logo/energy-bloom-icon.png",width:120,height:120,alt:"Energy Bloom logo"}),r.jsx("h1",{className:"2xl:text-[26px] font-ibm-plex-serif text-[26px] font-bold text-black-1 max-xl:hidden",children:"Energy Bloom"})]}),x.map(e=>{let s=t===e.route||t.startsWith(`${e.route}/`);return(0,r.jsxs)(c.default,{href:e.route,className:(0,d.cn)(" flex gap-3 items-center py-1 md:p-3 2xl:p-4 rounded-lg justify-center xl:justify-start",{"bg-primary":s}),children:[r.jsx("div",{className:"relative size-6",children:r.jsx(o.default,{src:e.imgURL,alt:e.label,fill:!0,className:(0,d.cn)({"text-black-1":s})})}),r.jsx("p",{className:(0,d.cn)("text-[16px] font-semibold text-black-1 max-xl:hidden",{"!text-gray-500":!s}),children:e.label})]},e.label)})]}),r.jsx(m,{user:e,type:"desktop"})]})};s(3824);let h=({children:e})=>{let[t,s]=(0,n.useState)(null),[a,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),x=(0,i.useRouter)();return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:3002/api/users/logged-in-user");if(!e.ok)throw Error("Failed to fetch user");let t=await e.json();if(s(t),t){let e=await fetch(`/api/devices/get?user_id=${t.id}`);if(!e.ok)throw Error("Failed to fetch devices");await e.json()}else x.push("/sign-in")}catch(e){e instanceof Error?d(e.message):d("An unexpected error occurred"),x.push("/sign-in")}finally{o(!1)}})()},[x]),a)?r.jsx("p",{children:"Loading..."}):c?r.jsx("p",{className:"text-red-500",children:c}):r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${l().className}`,children:(0,r.jsxs)("main",{className:"flex h-screen w-full bg-secondary",children:[r.jsx(g,{user:t}),e]})})})}},6796:(e,t,s)=>{"use strict";s.d(t,{HoverEffectBilling:()=>o});var r=s(7247),a=s(8964),l=s(7524),n=s(7078),i=s(8277);let o=({items:e,className:t,useGrid:s=!0})=>{let[o,u]=(0,a.useState)(null);return r.jsx("div",{className:(0,l.cn)("",t,{"grid grid-cols-1 md:grid-cols-1  lg:grid-cols-1 py-10":s}),children:e.map((e,t)=>(0,r.jsxs)("div",{className:"relative group  block p-2  w-full",onMouseEnter:()=>u(t),onMouseLeave:()=>u(null),children:[r.jsx(n.M,{children:o===t&&r.jsx(i.E.span,{className:"absolute inset-0 h-full w-full bg-primary dark:bg-slate-800 block rounded-3xl",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15}},exit:{opacity:0,transition:{duration:.15,delay:.2}}})}),(0,r.jsxs)(c,{children:[r.jsx(d,{children:e.month_year}),r.jsx("div",{className:"border-t border-gray-300 my-4"}),(0,r.jsxs)(x,{className:"text-black-2 text-[14px] font-medium flex",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("p",{children:[" Total Electricity Usage: ",e.usage," kWh "]}),(0,r.jsxs)("p",{children:[" Price: ",e.price," .- "]}),(0,r.jsxs)("p",{children:[" Tax: ",e.tax," .- "]})]}),r.jsx("div",{className:"flex ml-auto",children:(0,r.jsxs)("p",{children:[" Total: ",e.total," .- "]})})]})]})]},e?.month_year))},"billing")},c=({className:e,children:t})=>r.jsx("div",{className:(0,l.cn)("rounded-2xl w-full overflow-hidden relative z-20 shadow-lg bg-white",e),children:r.jsx("div",{className:"relative z-50",children:r.jsx("div",{className:"px-8 py-6",children:t})})}),d=({className:e,children:t})=>r.jsx("h4",{className:(0,l.cn)("text-black-1 font-bold tracking-wide",e),children:t}),x=({className:e,children:t})=>r.jsx("div",{className:(0,l.cn)("mt-3 text-black-2 tracking-wide leading-relaxed text-sm",e),children:t})},8852:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var r=s(7247),a=s(8964),l=s(9562),n=s(1608),i=s(7524);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...n},c)=>{let d=a?l.g7:"button";return r.jsx(d,{className:(0,i.cn)(o({variant:t,size:s,className:e})),ref:c,...n})});c.displayName="Button"},7524:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(1929),a=s(5770);function l(...e){return(0,a.m6)((0,r.W)(e))}},6151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(2051),a=s(7047),l=s(5347);let n=(0,l.createProxy)(String.raw`/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/components/shared/cards/card-billing.tsx#HoverEffectBilling`);(0,l.createProxy)(String.raw`/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/components/shared/cards/card-billing.tsx#Card`),(0,l.createProxy)(String.raw`/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/components/shared/cards/card-billing.tsx#Cardmonth_year`),(0,l.createProxy)(String.raw`/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/components/shared/cards/card-billing.tsx#CardDescription`);let i=()=>{let e=new Date,t=e.toLocaleString("en-US",{month:"long"}),s=e.getFullYear();return`${t} ${s}`},o=async()=>{let e=[].map(e=>{let t=new Date(e.created_at).toLocaleString("en-US",{month:"long"});return{month_year:`${t} ${e.year}`,price:e.price,usage:e.usage,tax:e.tax,total:e.total}});return console.log("LOGGED IN USER:",null),console.log("USER'S FORMATED BILLING:",e),r.jsx("section",{className:"no-scrollbar flex w-full flex-row max-xl:max-h-screen max-xl:overflow-y-scroll",children:(0,r.jsxs)("div",{className:"no-scrollbar flex w-full flex-1 flex-col gap-8 px-5 py-7  sm:px-8  lg:py-12  xl:max-h-screen xl:overflow-y-scroll",children:[r.jsx("header",{children:r.jsx(a.Z,{title:"Your billing information",subtext:i(),iconUrl:"/assets/icons/shared/calendar-icon.svg"})}),r.jsx(n,{items:e})]})})}},910:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(5347).createProxy)(String.raw`/Users/capt/Desktop/software-engineering/iot-bros/energy-bloom-soa/frontend/src/app/(root)/layout.tsx#default`)},7047:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(2051),a=s(9624);let l=({type:e,title:t,user:s,subtext:l,iconUrl:n})=>(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("h1",{className:"text-[32px] lg:text-[30px] font-semibold text-gray-900",children:[t,"greeting"===e&&(0,r.jsxs)("span",{className:"text-black",children:[",\xa0",s]})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[n&&r.jsx("div",{className:"bg-primary rounded-full w-8 h-8 flex items-center justify-center",children:r.jsx(a.default,{src:n,alt:`${n}`,width:50,height:2,className:"size-5"})}),l&&r.jsx("p",{className:"text-[14px] lg:text-[16px] font-normal text-gray-600",children:l})]})]})},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(4564);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},3824:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[379,39,899,782,624],()=>s(1197));module.exports=r})();